define("discourse/plugins/discourse-user-notes/discourse-user-notes/connectors/admin-user-controls-after/add-user-notes-button",["exports","discourse/plugins/discourse-user-notes/discourse-user-notes/connectors/user-profile-controls/show-notes-on-profile"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default;e.default=t})),define("discourse/plugins/discourse-user-notes/discourse-user-notes/connectors/after-reviewable-post-user/show-user-notes-on-flags",["exports","I18n","discourse/plugins/discourse-user-notes/discourse-user-notes/lib/user-notes","discourse-common/lib/get-owner","discourse/lib/text"],(function(e,s,t,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={shouldRender:function(e,s){return s.siteSettings.user_notes_enabled&&e.user},setupComponent:function(e,t){var o=e.user.get("custom_fields.user_notes_count")||0;t.setProperties({userNotesCount:o,emojiEnabled:t.siteSettings.enable_emoji,emojiUrl:(0,n.emojiUrlFor)("pencil"),userNotesTitle:s.default.t("user_notes.show",{count:o})})},actions:{showUserNotes:function(){var e=this,s=(0,o.getOwner)(this).lookup("service:store"),n=this.get("args.user");(0,t.showUserNotes)(s,n.id,(function(s){return e.set("userNotesCount",s)}))}}};e.default=r})),define("discourse/plugins/discourse-user-notes/discourse-user-notes/connectors/user-card-post-names/show-user-notes-on-card",["exports","I18n","discourse/plugins/discourse-user-notes/discourse-user-notes/lib/user-notes","discourse-common/lib/get-owner","discourse/lib/text"],(function(e,s,t,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={shouldRender:function(e,s){var t=s.siteSettings,o=s.currentUser;return t.user_notes_enabled&&o&&o.staff},setupComponent:function(e,t){var o=e.user,r=o.user_notes_count||o.get("custom_fields.user_notes_count")||0;t.setProperties({userNotesCount:r,emojiEnabled:t.siteSettings.enable_emoji,emojiUrl:(0,n.emojiUrlFor)("pencil"),userNotesTitle:s.default.t("user_notes.show",{count:r})})},actions:{showUserNotes:function(){var e=this;this.parentView.parentView._close();var s=(0,o.getOwner)(this).lookup("service:store"),n=this.get("args.user");(0,t.showUserNotes)(s,n.id,(function(s){e.isDestroying||e.isDestroyed||e.set("userNotesCount",s)}))}}};e.default=r})),define("discourse/plugins/discourse-user-notes/discourse-user-notes/connectors/user-profile-controls/show-notes-on-profile",["exports","discourse/plugins/discourse-user-notes/discourse-user-notes/lib/user-notes","discourse-common/lib/get-owner"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={shouldRender:function(e,s){var t=s.siteSettings,o=s.currentUser;return t.user_notes_enabled&&o&&o.staff},setupComponent:function(e,s){var t=e.model;s.set("userNotesCount",t.user_notes_count||t.get("custom_fields.user_notes_count")||0)},actions:{showUserNotes:function(){var e=this,o=(0,t.getOwner)(this).lookup("service:store"),n=this.get("args.model");(0,s.showUserNotes)(o,n.id,(function(s){return e.set("userNotesCount",s)}))}}};e.default=o})),define("discourse/plugins/discourse-user-notes/discourse-user-notes/lib/user-notes",["exports","discourse/lib/show-modal","discourse/lib/load-script"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showUserNotes=function(e,o,n,r){return r=r||{},(0,t.default)("defer/html-sanitizer-bundle").then((function(){return e.find("user-note",{user_id:o}).then((function(e){var t=(0,s.default)("user-notes",{model:e,title:"user_notes.title",addModalBodyView:!0});return t.reset(),t.setProperties({userId:o,callback:n,postId:r.postId}),t}))}))}})),Ember.TEMPLATES["javascripts/discourse-user-notes/templates/connectors/admin-user-controls-after/add-user-notes-button"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"show-user-notes",null,[["show","count"],[[28,"action",[[23,0,[]],"showUserNotes"],null],[24,["userNotesCount"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-user-notes/templates/connectors/admin-user-controls-after/add-user-notes-button"}}),Ember.TEMPLATES["javascripts/discourse-user-notes/templates/connectors/after-reviewable-post-user/show-user-notes-on-flags"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["userNotesCount"]]],null,{"statements":[[0,"  "],[7,"a",false],[12,"href",""],[12,"title",[22,"userNotesTitle"]],[3,"action",[[23,0,[]],"showUserNotes"]],[8],[0,"\\n"],[4,"if",[[24,["emojiEnabled"]]],null,{"statements":[[0,"      "],[7,"img",true],[11,"src",[22,"emojiUrl"]],[11,"title",[22,"userNotesTitle"]],[10,"alt","pencil"],[10,"class","emoji"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[28,"d-icon",["sticky-note"],null],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-user-notes/templates/connectors/after-reviewable-post-user/show-user-notes-on-flags"}}),Ember.TEMPLATES["javascripts/discourse-user-notes/templates/connectors/user-card-post-names/show-user-notes-on-card"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["userNotesCount"]]],null,{"statements":[[0,"  "],[7,"a",false],[12,"href",""],[12,"title",[22,"userNotesTitle"]],[3,"action",[[23,0,[]],"showUserNotes"]],[8],[0,"\\n"],[4,"if",[[24,["emojiEnabled"]]],null,{"statements":[[0,"      "],[7,"img",true],[11,"src",[22,"emojiUrl"]],[11,"title",[22,"userNotesTitle"]],[10,"alt","pencil"],[10,"class","emoji"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[28,"d-icon",["sticky-note"],null],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-user-notes/templates/connectors/user-card-post-names/show-user-notes-on-card"}}),Ember.TEMPLATES["javascripts/discourse-user-notes/templates/connectors/user-profile-controls/show-notes-on-profile"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"show-user-notes",null,[["show","count"],[[28,"action",[[23,0,[]],"showUserNotes"],null],[24,["userNotesCount"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-user-notes/templates/connectors/user-profile-controls/show-notes-on-profile"}}),define("discourse/plugins/discourse-user-notes/discourse/adapters/user-note",["exports","discourse/adapters/rest","discourse/lib/ajax"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s.default.extend({destroyRecord:function(e,s,o){var n=this.pathFor(e,s,o.id);return(0,t.ajax)("".concat(n,"?user_id=").concat(o.user_id),{method:"DELETE"})}});e.default=o})),define("discourse/plugins/discourse-user-notes/discourse/components/show-user-notes",["exports","@ember/component","@ember/object"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s.default.extend({tagName:"",showCount:t.computed.gt("count",0)});e.default=o})),define("discourse/plugins/discourse-user-notes/discourse/controllers/user-notes",["exports","I18n","discourse-common/utils/decorators","discourse/lib/ajax-error","@ember/controller"],(function(e,s,t,o,n){"use strict";var r,i,u;function a(e,s,t,o,n){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,o){return o(e,s,t)||t}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,s,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=n.default.extend((r=(0,t.on)("init"),i=(0,t.default)("newNote","saving"),a(u={newNote:null,saving:!1,user:null,reset:function(){this.setProperties({newNote:null,saving:!1,callback:null})},attachDisabled:function(e,s){return s||!e||0===e.length},_refreshCount:function(){this.callback&&this.callback(this.get("model.length"))},actions:{attachNote:function(){var e=this,s=this.store.createRecord("user-note"),t=parseInt(this.userId,10);this.set("saving",!0);var n={raw:this.newNote,user_id:t};this.postId&&(n.post_id=parseInt(this.postId,10)),s.save(n).then((function(){e.set("newNote",""),e.model.insertAt(0,s),e._refreshCount()})).catch(o.popupAjaxError).finally((function(){return e.set("saving",!1)}))},removeNote:function(e){var t=this;bootbox.confirm(s.default.t("user_notes.delete_confirm"),s.default.t("no_value"),s.default.t("yes_value"),(function(s){s&&e.destroyRecord().then((function(){t.model.removeObject(e),t._refreshCount()})).catch(o.popupAjaxError)}))}}},"reset",[r],Object.getOwnPropertyDescriptor(u,"reset"),u),a(u,"attachDisabled",[i],Object.getOwnPropertyDescriptor(u,"attachDisabled"),u),u));e.default=l})),define("discourse/plugins/discourse-user-notes/discourse/initializers/enable-user-notes",["exports","discourse/lib/plugin-api","discourse-common/lib/icon-library","discourse/plugins/discourse-user-notes/discourse-user-notes/lib/user-notes","discourse-common/utils/decorators"],(function(e,s,t,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={name:"enable-user-notes",initialize:function(e){var r=e.lookup("site-settings:main"),i=e.lookup("current-user:main");if(r.user_notes_enabled&&i&&i.staff){var u=e.lookup("service:store");(0,s.withPluginApi)("0.8.15",(function(e){var s,i,a,l,c,d,m,f,p,b;function h(){var e=this;(0,o.showUserNotes)(u,this.attrs.user_id,(function(s){e.sendWidgetAction("refreshUserNotes",s)}),{postId:this.attrs.id})}e.attachWidgetAction("post","refreshUserNotes",(function(e){var s=this.model.user_custom_fields||{};s.user_notes_count=e,this.model.set("user_custom_fields",s)})),e.modifyClass("controller:user",(s=(0,n.on)("init"),i=(0,n.observes)("model"),c=a={pluginId:"discourse-user-notes",userNotesCount:null,_modelChanged:function(){this.set("userNotesCount",this.get("model.custom_fields.user_notes_count")||0)},actions:{showUserNotes:function(){var e=this;(0,o.showUserNotes)(u,this.model.id,(function(s){return e.set("userNotesCount",s)}))}}},d="_modelChanged",m=[s,i],l=(l=Object.getOwnPropertyDescriptor(a,"_modelChanged"))?l.value:void 0,f={enumerable:!0,configurable:!0,writable:!0,initializer:function(){return l}},p=a,b={},Object.keys(f).forEach((function(e){b[e]=f[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=m.slice().reverse().reduce((function(e,s){return s(c,d,e)||e}),b),p&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(p):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,d,b),b=null),a));var v=e.container.lookup("site:main").mobileView?"before":"after";e.decorateWidget("poster-name:".concat(v),(function(e){if(!e.widget.settings.hideNotes)return(e.attrs.userCustomFields||{}).user_notes_count>0?e.attach("user-notes-icon"):void 0})),e.decorateWidget("post-avatar:after",(function(e){if(e.widget.settings.showNotes)return(e.attrs.userCustomFields||{}).user_notes_count>0?e.attach("user-notes-icon"):void 0})),e.decorateWidget("post-admin-menu:after",(function(e){return e.h("ul",e.attach("post-admin-menu-button",{icon:"pencil-alt",label:"user_notes.attach",action:"showUserNotes",secondaryAction:"closeAdminMenu",className:"add-user-note"}))})),e.attachWidgetAction("post","showUserNotes",h),e.createWidget("user-notes-icon",{tagName:"span.user-notes-icon",click:h,html:function(){return r.enable_emoji?this.attach("emoji",{name:"pencil"}):(0,t.iconNode)("sticky-note")}})}))}}};e.default=r})),Ember.TEMPLATES["javascripts/components/show-user-notes"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"a",false],[12,"href",""],[12,"class","btn"],[3,"action",[[23,0,[]],[24,["show"]]]],[8],[0,"\\n  "],[1,[28,"d-icon",["pencil-alt"],null],false],[0,"\\n"],[4,"if",[[24,["showCount"]]],null,{"statements":[[0,"    "],[1,[28,"i18n",["user_notes.show"],[["count"],[[24,["count"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[28,"i18n",["user_notes.title"],null],false],[0,"\\n"]],"parameters":[]}],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/show-user-notes"}}),Ember.TEMPLATES["javascripts/connectors/admin-dashboard-moderation-bottom/recent-user-notes-report-table"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["siteSettings","user_notes_enabled"]]],null,{"statements":[[0,"  "],[1,[28,"admin-report",null,[["dataSourceName","startDate","endDate"],["user_notes",[24,["lastWeek"]],[24,["endDate"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/admin-dashboard-moderation-bottom/recent-user-notes-report-table"}}),Ember.TEMPLATES["javascripts/modal/user-notes"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["n"],"statements":[[4,"d-modal-body",null,[["class"],["user-notes-modal"]],{"statements":[[0,"  "],[1,[28,"textarea",null,[["value"],[[24,["newNote"]]]]],false],[0,"\\n  "],[1,[28,"d-button",null,[["action","label","class","disabled"],[[28,"action",[[23,0,[]],"attachNote"],null],"user_notes.attach","btn-primary",[24,["attachDisabled"]]]]],false],[0,"\\n\\n"],[4,"each",[[24,["model"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","user-note"],[8],[0,"\\n      "],[7,"div",true],[10,"class","posted-by"],[8],[0,"\\n"],[4,"user-link",null,[["user"],[[23,1,["created_by"]]]],{"statements":[[0,"          "],[1,[28,"avatar",[[23,1,["created_by"]]],[["imageSize"],["small"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n      "],[7,"div",true],[10,"class","note-contents"],[8],[0,"\\n        "],[7,"div",true],[10,"class","note-info"],[8],[0,"\\n          "],[7,"span",true],[10,"class","username"],[8],[1,[23,1,["created_by","username"]],false],[9],[0,"\\n          "],[7,"span",true],[10,"class","post-date"],[8],[1,[28,"age-with-tooltip",[[23,1,["created_at"]]],null],false],[9],[0,"\\n\\n"],[4,"if",[[23,1,["can_delete"]]],null,{"statements":[[0,"            "],[7,"span",true],[10,"class","controls"],[8],[0,"\\n              "],[1,[28,"d-button",null,[["action","icon","class","title"],[[28,"action",[[23,0,[]],"removeNote",[23,1,[]]],null],"far-trash-alt","btn-small btn-danger","user_notes.remove"]]],false],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "],[9],[0,"\\n\\n        "],[7,"div",true],[10,"class","cooked"],[8],[0,"\\n          "],[1,[28,"cook-text",[[23,1,["raw"]]],null],false],[0,"\\n        "],[9],[0,"\\n\\n"],[4,"if",[[23,1,["post_id"]]],null,{"statements":[[0,"          "],[7,"a",true],[11,"href",[23,1,["post_url"]]],[10,"class","btn btn-small"],[8],[0,"\\n            "],[1,[28,"i18n",["user_notes.show_post"],null],false],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n\\n      "],[7,"div",true],[10,"class","clearfix"],[8],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/modal/user-notes"}});
//# sourceMappingURL=https://dub2.discourse-cdn.com/arduino/assets/plugins/discourse-user-notes-c1c4a60a3023ddfc97f9a5bae3b5e3da802e458a4dacc81e0f9153205b238335.js.map